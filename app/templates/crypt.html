<!doctype html>
{% extends 'base.html' %}

{% block title %} Crypt {% endblock %}

{% block navbar %}
<li class="nav-item">
    <a class="nav-link px-2" href="{{ url_for('search.index') }}">About</a>
</li>
<li class="nav-item active">
    <a class="nav-link px-2" href="{{ url_for('search.crypt') }}">Crypt</a>
</li>
<li class="nav-item">
    <a class="nav-link px-2 pr-xl-2" href="{{ url_for('search.library') }}">Library</a>
</li>
{% endblock %}

{% block total %}
{% if total %}
TOTAL: {{ total.pop(0) }} &nbsp;
{% for group in total %}
<font color="#a0a0a0"><b>G{{ group[0] }}:</b></font>{{group[1] }} &nbsp;
{% endfor %}
{% endif %}
{% endblock %}

{% block results %}

<table width="100%" class="result-table">
    {% for card in cards %}
    <tr class="crypt-result-{{ loop.cycle('odd', 'even') }}">
        <td width="6%">
            <div class="cards" id="1{{ card['Id'] }}" onclick="cardShowText(1{{ card['Id'] }}, 2{{ card['Id'] }})">
                <img src="static/img/misc/cap{{ card['Capacity'] }}.png" height="23" alt="{{ card['Capacity'] }}">
            </div>
        </td>
        <td width="37%">
            <div class="crypt-result-disciplines d-flex" id="1{{ card['Id'] }}" onclick="cardShowText(1{{ card['Id'] }}, 2{{ card['Id'] }})">
                <div class="crypt-result-disciplines d-flex" id="1{{ card['Id'] }}" onclick="cardShowText(1{{ card['Id'] }}, 2{{ card['Id'] }})">
                    {% for dis in card['Discipline'] %}
                    {% if dis[0] != '-none-' %}
                    <div style='width: 27px; text-align: center'>
                        <img src="static/img/disciplines/{{ dis[0] }}.gif" height="{{ dis[1] }}" alt="{{ dis }}" />
                    </div>
                    {% endif %}
                    {% endfor %}
                </div>
        </td>
        <td width="41%">
            <div class="crypt-result-name d-flex" id="1{{ card['Id'] }}" onclick="cardShowText(1{{ card['Id'] }}, 2{{ card['Id'] }})">
                <span class="d-inline d-sm-none">
                    <a href="javascript: void(0);" data-toggle="modal" data-target="#crypt-modal-{{ card['Id'] }}">
                        {{ card['Name'] }}
                    </a>
                </span>

                <div class="modal" id="crypt-modal-{{ card['Id'] }}" tabindex="-1" role="dialog" aria-labelledby="crypt-modal-label-{{ card['Id'] }}" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <button type="image" id="closemodalbutton" class="btn btn-secondary" data-dismiss="modal">
                            <img class="lozad" data-src="{{ 'static/img/cards/'+ card['URL Name'] + '.jpg' }}" alt="" id="crypt-image" />
                        </button>
                    </div>
                </div>

                <span class="hover_img d-none d-sm-inline">
                    <a href="{{ 'static/img/cards/' + card['URL Name'] + '.jpg' }}" class="js-cardname">
                        {{ card['Name'] }}
                        <span class="js-cardimage">
                            <img class="lozad" data-src="{{ 'static/img/cards/'+ card['URL Name'] + '.jpg' }}" alt="" height="400" />
                        </span>
                    </a>
                </span>
            </div>

        </td>
        <td width="10%" align="center">
            <div class="crypt-result-clan" id="1{{ card['Id'] }}" onclick="cardShowText(1{{ card['Id'] }}, 2{{ card['Id'] }})">
                <img src="static/img/clans/{{ card['URL Clan'] }}.gif" height="26" alt="{{ card['Clan'] }}">
            </div>
        </td>
        <td width="6%">
            <div class="crypt-result-group" id="1{{ card['Id'] }}" onclick="cardShowText(1{{ card['Id'] }}, 2{{ card['Id'] }})">
                <b><font color="a0a0a0">G</font>{{ card['Group'] }}</b>
            </div>
        </td>
    </tr>
    <tr class="crypt-result-{{ loop.cycle('odd', 'even') }}">
        <td>
        </td>
        <td>
        </td>
        <td colspan="3">
            <div class="cards" id="1{{ card['Id'] }}" onclick="cardShowText(1{{ card['Id'] }}, 2{{ card['Id'] }})">
                <div class="crypt-result-text" id="2{{ card['Id'] }}" style="display:none;">
                    {% if card['Type'] == 'Vampire' %}
                    <b>{{ card['Card Text'].pop(0) }}</b><br>
                    {% endif %}
                    {% for i in card['Card Text'] %}
                    {{ i }}<br>
                    {% endfor %}
                </div>
            </div>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}

{% block search %}
<!--<form id="cryptsearchform" action="" method="post" novalidate>-->
    <!--<div class="form-row">-->
        <!--<div class="col-7">-->
            <!--<input type="text" class="form-control" id="cardtext" name="cardtext" placeholder="Card Name / Text" value="">-->
        <!--</div>-->
        <!--<div class="col-5">-->
            <!--<button id="submit" name="submit" class="btn btn-primary" type="submit">&#x1F50D</button>-->
            <!--<button id="clear-crypt" value="Clear" onclick="clearCrypt()"  class="btn btn-secondary" type="button">ðŸ—‘</button>-->
            <!--<button id="show-all-text" value="Show Text" onclick="showAll()"  class="btn btn-secondary" type="button">â˜°</button>-->
        <!--</div>-->
    <!--</div>-->
    <!--<br>-->

    <!--<div class="form-row">-->
        <!--<div class="input-group">-->
            <!--{{ form.disciplines() }}-->
        <!--</div>-->
    <!--</div>-->

    <!--<div class="form-row">-->
        <!--<div class="input-group">-->
            <!--{{ form.virtues() }}-->
        <!--</div>-->
    <!--</div>-->

    <!--<div class="form-row">-->
        <!--<div class="form-group col-3">-->
            <!--<label class="h6">Capacity:</label>-->
        <!--</div>-->
        <!--<div class="form-group col-9">-->
            <!--<div class="input-group">-->
                <!--{{ form.capacitymoreless() }}-->
                <!--{{ form.capacity() }}-->
            <!--</div>-->
        <!--</div>-->
    <!--</div>-->

    <!--<div class="form-row">-->
        <!--<div class="form-group col-3">-->
            <!--<label class="h6">Clan:</label>-->
        <!--</div>-->
        <!--<div class="form-group col-9">-->
            <!--{{ form.clan() }}-->
        <!--</div>-->
    <!--</div>-->

    <!--<div class="form-row">-->
        <!--<div class="form-group col-3">-->
            <!--<label class="h6">Sect:</label>-->
        <!--</div>-->
        <!--<div class="form-group col-9">-->
            <!--{{ form.sect() }}-->
        <!--</div>-->
    <!--</div>-->

    <!--<div class="form-row">-->
        <!--<div class="form-group col-3">-->
            <!--<label class="h6">Votes:</label>-->
        <!--</div>-->
        <!--<div class="form-group col-9">-->
            <!--{{ form.votes() }}-->
        <!--</div>-->
    <!--</div>-->

    <!--<div class="form-row">-->
        <!--{{ form.titles() }}-->
    <!--</div>-->

    <!--<div class="form-row">-->
        <!--<div class="col">-->
            <!--<h6>Group:</h6>-->
        <!--</div>-->
        <!--{{ form.group() }}-->
    <!--</div>-->

    <!--<h6>Traits:</h6>-->
    <!--<div class="form-row">-->
        <!--{{ form.trait() }}-->
    <!--</div>-->

<!--</form>-->
{% endblock %}

{% block navsearch %}
<form id="cryptsearchform" action="" method="post" novalidate>
    <div class="form-row">
        <div class="col-7">
            <input type="text" class="form-control" id="cardtext" name="cardtext" placeholder="Card Name / Text" value="">
        </div>
        <div class="col-5">
            <button id="submit" name="submit" class="btn btn-outline-primary" type="submit">
                <svg class="bi bi-check" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M13.854 3.646a.5.5 0 010 .708l-7 7a.5.5 0 01-.708 0l-3.5-3.5a.5.5 0 11.708-.708L6.5 10.293l6.646-6.647a.5.5 0 01.708 0z" clip-rule="evenodd"/>
                </svg>
            </button>
            <button id="clear-library" value="Clear" onclick="clearLibrary()"  class="btn btn-outline-secondary" type="button">
                <svg class="bi bi-x" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M11.854 4.146a.5.5 0 010 .708l-7 7a.5.5 0 01-.708-.708l7-7a.5.5 0 01.708 0z" clip-rule="evenodd"/>
                    <path fill-rule="evenodd" d="M4.146 4.146a.5.5 0 000 .708l7 7a.5.5 0 00.708-.708l-7-7a.5.5 0 00-.708 0z" clip-rule="evenodd"/>
                </svg>
            </button>
            <button id="show-all-text" value="Show Text" onclick="showAll()"  class="btn btn-outline-secondary" type="button">
                <svg class="bi bi-justify-left" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M2 12.5a.5.5 0 01.5-.5h7a.5.5 0 010 1h-7a.5.5 0 01-.5-.5zm0-3a.5.5 0 01.5-.5h11a.5.5 0 010 1h-11a.5.5 0 01-.5-.5zm0-3a.5.5 0 01.5-.5h11a.5.5 0 010 1h-11a.5.5 0 01-.5-.5zm0-3a.5.5 0 01.5-.5h11a.5.5 0 010 1h-11a.5.5 0 01-.5-.5z" clip-rule="evenodd"/>
                </svg>
            </button>
        </div>
    </div>
    <br>

    <div class="form-row">
        <div class="input-group">
            {{ form.disciplines() }}
        </div>
    </div>

    <div class="form-row">
        <div class="input-group">
            {{ form.virtues() }}
        </div>
    </div>

    <div class="form-row">
        <div class="form-group col-3">
            <label class="h6">Capacity:</label>
        </div>
        <div class="form-group col-9">
            <div class="input-group">
                {{ form.capacitymoreless() }}
                {{ form.capacity() }}
            </div>
        </div>
    </div>

    <div class="form-row">
        <div class="form-group col-3">
            <label class="h6">Clan:</label>
        </div>
        <div class="form-group col-9">
            {{ form.clan() }}
        </div>
    </div>

    <div class="form-row">
        <div class="form-group col-3">
            <label class="h6">Sect:</label>
        </div>
        <div class="form-group col-9">
            {{ form.sect() }}
        </div>
    </div>
    <div class="form-row">
        <div class="form-group col-3">
            <label class="h6">Votes:</label>
        </div>
        <div class="form-group col-9">
            {{ form.votes() }}
        </div>
    </div>

    <div class="form-row">
        {{ form.titles() }}
    </div>

    <div class="form-row">
        <div class="col">
            <h6>Group:</h6>
        </div>
        {{ form.group() }}
    </div>

    <h6>Traits:</h6>
    <div class="form-row">
        {{ form.trait() }}
    </div>

</form>
{% endblock %}
